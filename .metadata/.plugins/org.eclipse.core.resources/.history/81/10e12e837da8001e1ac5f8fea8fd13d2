import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class FadeList extends JList {

    private static final int FADE_TIME = 1000; // milliseconds
    private static final int UPDATE_INTERVAL = 50; // milliseconds
    private static final float OPACITY_DELTA = (float) UPDATE_INTERVAL / FADE_TIME;

    private float[] opacities;

    public FadeList(ListModel model) {
        super(model);
        opacities = new float[model.getSize()];
        setCellRenderer(new FadeListCellRenderer());
        Timer timer = new Timer(UPDATE_INTERVAL, new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                updateOpacities();
                repaint();
            }
        });
        timer.start();
    }

    private void updateOpacities() {
        for (int i = 0; i < opacities.length; i++) {
            float opacity = opacities[i];
            if (opacity > 0f) {
                opacity -= OPACITY_DELTA;
                if (opacity < 0f) {
                    opacity = 0f;
                }
                opacities[i] = opacity;
            }
        }
    }

    @Override
    public void setListData(Object[] listData) {
        super.setListData(listData);
        opacities = new float[listData.length];
    }

    @Override
    public void setModel(ListModel model) {
        super.setModel(model);
        opacities = new float[model.getSize()];
    }

    @Override
    public void addElement(Object element) {
        super.addElement(element);
        opacities = Arrays.copyOf(opacities, opacities.length + 1);
        opacities[opacities.length - 1] = 1f;
    }

    private class FadeListCellRenderer extends DefaultListCellRenderer {
        @Override
        public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
            Component c = super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
            c.setBackground(new Color(1f, 1f, 1f, opacities[index]));
            return c;
        }
    }
}
